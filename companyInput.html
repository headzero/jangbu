<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>회사 정보 입력</title>
</head>

<script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDVEonurEpbMwfmBVGKp0jIbOBcv9ukht4",
    authDomain: "jangbu-3af0b.firebaseapp.com",
    databaseURL: "https://jangbu-3af0b.firebaseio.com",
    projectId: "jangbu-3af0b",
    storageBucket: "",
    messagingSenderId: "763168792123"
  };
  firebase.initializeApp(config);

  // Get a reference to the database service
  var database = firebase.database();

    function dateCheck() {
        var theForm = document.write_company_info;
        companyName = theForm.companyName.value;
        bossName = theForm.bossName.value;
        companyNum = theForm.companyNum.value;
        phoneNum = theForm.phoneNum.value;
        accountNum = theForm.accountNum.value;
        accountName = theForm.accountName.value;
        outstandingNum = theForm.outstandingNum.value;
        
        if(companyName==""||companyName==undefined){
            alert("회사명을 입력해주세요.");
            return false;
        }
        if(outstandingNum==""||outstandingNum==undefined){
           outstandingNum = 0;
        }
        
        writeCompanyDate(companyName, bossName, companyNum, phoneNum, accountNum, accountName, outstandingNum);
    }
    
    function writeCompanyDate(companyName, bossName, companyNum, phoneNum, accountNum, accountName, outstandingNum){
        var companyId = database.ref().child('company').push().key;
        database.ref('company/' + companyId).set({
            company_id: companyId,
            company_name: companyName,
            boss_name: bossName,
            company_num : companyNum,
            phone_num : phoneNum,
            account_num : accountNum,
            account_name : accountName,
            outstanding_num : outstandingNum
        });        
    }

</script>
    
<body>
    <form name="write_company_info">
        <p>회사 정보 리스트</p>
        회사명(필수): <input type="text" name=companyName><br>
        대표 성명: <input type="text" name=bossName><br>
        사업자번호: <input type="text" name=companyNum pattern="\d{3}-\d{2}-\d{5}"><br>
        전화번호: <input type="tel" name=phoneNum pattern="\d{2,3,4}-\d{3,4}-\d{4}"><br>
        계좌번호: <input type="text" name=accountNum><br>
        예금주: <input type="text" name=accountName><br>
        미수금: <input type="number" name=outstandingNum><br>
        <input type="button" value="저장" onclick="dateCheck()">
    </form>
    <table>
    
    </table>
</body>
</html>